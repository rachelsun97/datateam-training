<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 4 Editing EML | NCEAS Data Team Training</title>
  <meta name="description" content="This is a training guide and reference resource for NCEAS data team members working on the SASAP and Arctic Data Center projects" />
  <meta name="generator" content="bookdown 0.14.1 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 4 Editing EML | NCEAS Data Team Training" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This is a training guide and reference resource for NCEAS data team members working on the SASAP and Arctic Data Center projects" />
  <meta name="github-repo" content="NCEAS/datateam-training" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 4 Editing EML | NCEAS Data Team Training" />
  
  <meta name="twitter:description" content="This is a training guide and reference resource for NCEAS data team members working on the SASAP and Arctic Data Center projects" />
  

<meta name="author" content="Jesse Goldstein, Dominic Mullen, Jeanette Clark, Irene Steves, Mitchell Maier, Bryce Mecum, Peter Slaughter, Emily O’Dean" />


<meta name="date" content="2019-10-11" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  <link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />
<link rel="prev" href="exploring-eml.html"/>
<link rel="next" href="updating-a-data-package.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />











<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; position: absolute; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; }
pre.numberSource a.sourceLine:empty
  { position: absolute; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: absolute; left: -5em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  { background-color: #f8f8f8; }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ef2929; } /* Alert */
code span.an { color: #8f5902; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #c4a000; } /* Attribute */
code span.bn { color: #0000cf; } /* BaseN */
code span.cf { color: #204a87; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4e9a06; } /* Char */
code span.cn { color: #000000; } /* Constant */
code span.co { color: #8f5902; font-style: italic; } /* Comment */
code span.cv { color: #8f5902; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #8f5902; font-weight: bold; font-style: italic; } /* Documentation */
code span.dt { color: #204a87; } /* DataType */
code span.dv { color: #0000cf; } /* DecVal */
code span.er { color: #a40000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #0000cf; } /* Float */
code span.fu { color: #000000; } /* Function */
code span.im { } /* Import */
code span.in { color: #8f5902; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #204a87; font-weight: bold; } /* Keyword */
code span.op { color: #ce5c00; font-weight: bold; } /* Operator */
code span.ot { color: #8f5902; } /* Other */
code span.pp { color: #8f5902; font-style: italic; } /* Preprocessor */
code span.sc { color: #000000; } /* SpecialChar */
code span.ss { color: #4e9a06; } /* SpecialString */
code span.st { color: #4e9a06; } /* String */
code span.va { color: #000000; } /* Variable */
code span.vs { color: #4e9a06; } /* VerbatimString */
code span.wa { color: #8f5902; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="../styles.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Data Team Training</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Welcome to NCEAS!</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#first-day-to-dos"><i class="fa fa-check"></i>First day to-dos</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#account-information"><i class="fa fa-check"></i>Account information</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#nceas-events"><i class="fa fa-check"></i>NCEAS events</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#citation-information"><i class="fa fa-check"></i>Citation Information</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="introduction-to-open-science.html"><a href="introduction-to-open-science.html"><i class="fa fa-check"></i><b>1</b> Introduction to open science</a><ul>
<li class="chapter" data-level="1.1" data-path="introduction-to-open-science.html"><a href="introduction-to-open-science.html#background-reading"><i class="fa fa-check"></i><b>1.1</b> Background reading</a></li>
<li class="chapter" data-level="1.2" data-path="introduction-to-open-science.html"><a href="introduction-to-open-science.html#effective-data-management"><i class="fa fa-check"></i><b>1.2</b> Effective data management</a></li>
<li class="chapter" data-level="1.3" data-path="introduction-to-open-science.html"><a href="introduction-to-open-science.html#using-dataone"><i class="fa fa-check"></i><b>1.3</b> Using DataONE</a></li>
<li class="chapter" data-level="1.4" data-path="introduction-to-open-science.html"><a href="introduction-to-open-science.html#working-on-a-remote-server"><i class="fa fa-check"></i><b>1.4</b> Working on a remote server</a></li>
<li class="chapter" data-level="1.5" data-path="introduction-to-open-science.html"><a href="introduction-to-open-science.html#cyberduck-instructions"><i class="fa fa-check"></i><b>1.5</b> Cyberduck instructions</a></li>
<li class="chapter" data-level="1.6" data-path="introduction-to-open-science.html"><a href="introduction-to-open-science.html#a-note-on-paths"><i class="fa fa-check"></i><b>1.6</b> A note on paths</a></li>
<li class="chapter" data-level="1.7" data-path="introduction-to-open-science.html"><a href="introduction-to-open-science.html#a-note-on-r"><i class="fa fa-check"></i><b>1.7</b> A note on R</a></li>
<li class="chapter" data-level="1.8" data-path="introduction-to-open-science.html"><a href="introduction-to-open-science.html#exercise-1"><i class="fa fa-check"></i><b>1.8</b> Exercise 1</a><ul>
<li class="chapter" data-level="1.8.1" data-path="introduction-to-open-science.html"><a href="introduction-to-open-science.html#part-1"><i class="fa fa-check"></i><b>1.8.1</b> Part 1</a></li>
<li class="chapter" data-level="1.8.2" data-path="introduction-to-open-science.html"><a href="introduction-to-open-science.html#part-2"><i class="fa fa-check"></i><b>1.8.2</b> Part 2</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="creating-a-data-package.html"><a href="creating-a-data-package.html"><i class="fa fa-check"></i><b>2</b> Creating a data package</a><ul>
<li class="chapter" data-level="2.1" data-path="creating-a-data-package.html"><a href="creating-a-data-package.html#what-is-in-a-package"><i class="fa fa-check"></i><b>2.1</b> What is in a package?</a></li>
<li class="chapter" data-level="2.2" data-path="creating-a-data-package.html"><a href="creating-a-data-package.html#about-identifiers"><i class="fa fa-check"></i><b>2.2</b> About identifiers</a></li>
<li class="chapter" data-level="2.3" data-path="creating-a-data-package.html"><a href="creating-a-data-package.html#upload-a-package"><i class="fa fa-check"></i><b>2.3</b> Upload a package</a></li>
<li class="chapter" data-level="2.4" data-path="creating-a-data-package.html"><a href="creating-a-data-package.html#publish-an-object"><i class="fa fa-check"></i><b>2.4</b> Publish an object</a></li>
<li class="chapter" data-level="2.5" data-path="creating-a-data-package.html"><a href="creating-a-data-package.html#create-a-resource-map"><i class="fa fa-check"></i><b>2.5</b> Create a resource map</a></li>
<li class="chapter" data-level="2.6" data-path="creating-a-data-package.html"><a href="creating-a-data-package.html#exercise-2"><i class="fa fa-check"></i><b>2.6</b> Exercise 2</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="exploring-eml.html"><a href="exploring-eml.html"><i class="fa fa-check"></i><b>3</b> Exploring EML</a><ul>
<li class="chapter" data-level="3.1" data-path="exploring-eml.html"><a href="exploring-eml.html#navigate-through-eml"><i class="fa fa-check"></i><b>3.1</b> Navigate through EML</a></li>
<li class="chapter" data-level="3.2" data-path="exploring-eml.html"><a href="exploring-eml.html#understand-the-eml-schema"><i class="fa fa-check"></i><b>3.2</b> Understand the EML schema</a></li>
<li class="chapter" data-level="3.3" data-path="exploring-eml.html"><a href="exploring-eml.html#access-specific-elements"><i class="fa fa-check"></i><b>3.3</b> Access specific elements</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="editing-eml.html"><a href="editing-eml.html"><i class="fa fa-check"></i><b>4</b> Editing EML</a><ul>
<li class="chapter" data-level="4.1" data-path="editing-eml.html"><a href="editing-eml.html#get-package-and-eml"><i class="fa fa-check"></i><b>4.1</b> Get package and EML</a></li>
<li class="chapter" data-level="4.2" data-path="editing-eml.html"><a href="editing-eml.html#edit-an-eml-element"><i class="fa fa-check"></i><b>4.2</b> Edit an EML element</a><ul>
<li class="chapter" data-level="4.2.1" data-path="editing-eml.html"><a href="editing-eml.html#edit-eml-with-strings"><i class="fa fa-check"></i><b>4.2.1</b> Edit EML with strings</a></li>
<li class="chapter" data-level="4.2.2" data-path="editing-eml.html"><a href="editing-eml.html#edit-eml-with-the-eml-package"><i class="fa fa-check"></i><b>4.2.2</b> Edit EML with the “EML” package</a></li>
<li class="chapter" data-level="4.2.3" data-path="editing-eml.html"><a href="editing-eml.html#edit-eml-with-objects"><i class="fa fa-check"></i><b>4.2.3</b> Edit EML with objects</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="editing-eml.html"><a href="editing-eml.html#edit-attributelists"><i class="fa fa-check"></i><b>4.3</b> Edit attributeLists</a><ul>
<li class="chapter" data-level="4.3.1" data-path="editing-eml.html"><a href="editing-eml.html#edit-attributes"><i class="fa fa-check"></i><b>4.3.1</b> Edit attributes</a></li>
<li class="chapter" data-level="4.3.2" data-path="editing-eml.html"><a href="editing-eml.html#edit-custom-units"><i class="fa fa-check"></i><b>4.3.2</b> Edit custom units</a></li>
<li class="chapter" data-level="4.3.3" data-path="editing-eml.html"><a href="editing-eml.html#edit-factors"><i class="fa fa-check"></i><b>4.3.3</b> Edit factors</a></li>
<li class="chapter" data-level="4.3.4" data-path="editing-eml.html"><a href="editing-eml.html#finalize-attributelist"><i class="fa fa-check"></i><b>4.3.4</b> Finalize attributeList</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="editing-eml.html"><a href="editing-eml.html#set-physical"><i class="fa fa-check"></i><b>4.4</b> Set physical</a></li>
<li class="chapter" data-level="4.5" data-path="editing-eml.html"><a href="editing-eml.html#edit-datatables"><i class="fa fa-check"></i><b>4.5</b> Edit dataTables</a></li>
<li class="chapter" data-level="4.6" data-path="editing-eml.html"><a href="editing-eml.html#edit-otherentities"><i class="fa fa-check"></i><b>4.6</b> Edit otherEntities</a><ul>
<li class="chapter" data-level="4.6.1" data-path="editing-eml.html"><a href="editing-eml.html#remove-otherentities"><i class="fa fa-check"></i><b>4.6.1</b> Remove otherEntities</a></li>
<li class="chapter" data-level="4.6.2" data-path="editing-eml.html"><a href="editing-eml.html#create-otherentities"><i class="fa fa-check"></i><b>4.6.2</b> Create otherEntities</a></li>
</ul></li>
<li class="chapter" data-level="4.7" data-path="editing-eml.html"><a href="editing-eml.html#edit-spatialvectors"><i class="fa fa-check"></i><b>4.7</b> Edit spatialVectors</a></li>
<li class="chapter" data-level="4.8" data-path="editing-eml.html"><a href="editing-eml.html#set-coverages"><i class="fa fa-check"></i><b>4.8</b> Set coverages</a></li>
<li class="chapter" data-level="4.9" data-path="editing-eml.html"><a href="editing-eml.html#set-methods"><i class="fa fa-check"></i><b>4.9</b> Set methods</a><ul>
<li class="chapter" data-level="4.9.1" data-path="editing-eml.html"><a href="editing-eml.html#adding-sampling-info-to-methods-section"><i class="fa fa-check"></i><b>4.9.1</b> Adding sampling info to methods section</a></li>
</ul></li>
<li class="chapter" data-level="4.10" data-path="editing-eml.html"><a href="editing-eml.html#set-parties"><i class="fa fa-check"></i><b>4.10</b> Set parties</a></li>
<li class="chapter" data-level="4.11" data-path="editing-eml.html"><a href="editing-eml.html#validate-eml-and-update-package"><i class="fa fa-check"></i><b>4.11</b> Validate EML and update package</a></li>
<li class="chapter" data-level="4.12" data-path="editing-eml.html"><a href="editing-eml.html#exercise-3"><i class="fa fa-check"></i><b>4.12</b> Exercise 3</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="updating-a-data-package.html"><a href="updating-a-data-package.html"><i class="fa fa-check"></i><b>5</b> Updating a data package</a><ul>
<li class="chapter" data-level="5.1" data-path="updating-a-data-package.html"><a href="updating-a-data-package.html#update-a-data-object"><i class="fa fa-check"></i><b>5.1</b> Update a data object</a></li>
<li class="chapter" data-level="5.2" data-path="updating-a-data-package.html"><a href="updating-a-data-package.html#update-a-package-with-a-new-data-object"><i class="fa fa-check"></i><b>5.2</b> Update a package with a new data object</a><ul>
<li class="chapter" data-level="5.2.1" data-path="updating-a-data-package.html"><a href="updating-a-data-package.html#publish-update"><i class="fa fa-check"></i><b>5.2.1</b> Publish update</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="updating-a-data-package.html"><a href="updating-a-data-package.html#exercise-4"><i class="fa fa-check"></i><b>5.3</b> Exercise 4</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="editing-system-metadata.html"><a href="editing-system-metadata.html"><i class="fa fa-check"></i><b>6</b> Editing system metadata</a><ul>
<li class="chapter" data-level="6.1" data-path="editing-system-metadata.html"><a href="editing-system-metadata.html#edit-sysmeta"><i class="fa fa-check"></i><b>6.1</b> Edit sysmeta</a><ul>
<li class="chapter" data-level="6.1.1" data-path="editing-system-metadata.html"><a href="editing-system-metadata.html#identifiers-and-sysmeta"><i class="fa fa-check"></i><b>6.1.1</b> Identifiers and sysmeta</a></li>
<li class="chapter" data-level="6.1.2" data-path="editing-system-metadata.html"><a href="editing-system-metadata.html#additional-resources"><i class="fa fa-check"></i><b>6.1.2</b> Additional resources</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="editing-system-metadata.html"><a href="editing-system-metadata.html#set-rights-and-access"><i class="fa fa-check"></i><b>6.2</b> Set rights and access</a><ul>
<li class="chapter" data-level="6.2.1" data-path="editing-system-metadata.html"><a href="editing-system-metadata.html#my-profile"><i class="fa fa-check"></i><b>6.2.1</b> My profile</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="editing-system-metadata.html"><a href="editing-system-metadata.html#exercise-5"><i class="fa fa-check"></i><b>6.3</b> Exercise 5</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="using-git.html"><a href="using-git.html"><i class="fa fa-check"></i><b>7</b> Using Git</a><ul>
<li class="chapter" data-level="7.1" data-path="using-git.html"><a href="using-git.html#what-is-git"><i class="fa fa-check"></i><b>7.1</b> What is Git?</a><ul>
<li class="chapter" data-level="7.1.1" data-path="using-git.html"><a href="using-git.html#so-why-do-i-need-to-use-this-again"><i class="fa fa-check"></i><b>7.1.1</b> So why do I need to use this again?</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="using-git.html"><a href="using-git.html#setting-up-git"><i class="fa fa-check"></i><b>7.2</b> Setting up Git</a><ul>
<li class="chapter" data-level="7.2.1" data-path="using-git.html"><a href="using-git.html#cloning-the-arctic-data-repo"><i class="fa fa-check"></i><b>7.2.1</b> Cloning the arctic-data repo</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="using-git.html"><a href="using-git.html#working-with-the-repository"><i class="fa fa-check"></i><b>7.3</b> Working with the repository</a><ul>
<li class="chapter" data-level="7.3.1" data-path="using-git.html"><a href="using-git.html#adding-a-new-script"><i class="fa fa-check"></i><b>7.3.1</b> Adding a new script</a></li>
<li class="chapter" data-level="7.3.2" data-path="using-git.html"><a href="using-git.html#editing-a-script"><i class="fa fa-check"></i><b>7.3.2</b> Editing a script</a></li>
<li class="chapter" data-level="7.3.3" data-path="using-git.html"><a href="using-git.html#where-do-i-commit"><i class="fa fa-check"></i><b>7.3.3</b> Where do I commit?</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="using-git.html"><a href="using-git.html#my-git-tab-disappeared"><i class="fa fa-check"></i><b>7.4</b> My Git tab disappeared</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="using-rt.html"><a href="using-rt.html"><i class="fa fa-check"></i><b>8</b> Using RT</a><ul>
<li class="chapter" data-level="8.1" data-path="using-rt.html"><a href="using-rt.html#navigate-rt"><i class="fa fa-check"></i><b>8.1</b> Navigate RT</a><ul>
<li class="chapter" data-level="8.1.1" data-path="using-rt.html"><a href="using-rt.html#front-page"><i class="fa fa-check"></i><b>8.1.1</b> Front page</a></li>
<li class="chapter" data-level="8.1.2" data-path="using-rt.html"><a href="using-rt.html#all-tickets"><i class="fa fa-check"></i><b>8.1.2</b> All tickets</a></li>
<li class="chapter" data-level="8.1.3" data-path="using-rt.html"><a href="using-rt.html#example-ticket"><i class="fa fa-check"></i><b>8.1.3</b> Example ticket</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="nesting-a-data-package.html"><a href="nesting-a-data-package.html"><i class="fa fa-check"></i><b>9</b> Nesting a data package</a><ul>
<li class="chapter" data-level="9.1" data-path="nesting-a-data-package.html"><a href="nesting-a-data-package.html#add-children-to-an-existing-parent"><i class="fa fa-check"></i><b>9.1</b> Add children to an existing parent</a></li>
<li class="chapter" data-level="9.2" data-path="nesting-a-data-package.html"><a href="nesting-a-data-package.html#create-a-new-parent-package"><i class="fa fa-check"></i><b>9.2</b> Create a new parent package</a></li>
<li class="chapter" data-level="9.3" data-path="nesting-a-data-package.html"><a href="nesting-a-data-package.html#example"><i class="fa fa-check"></i><b>9.3</b> Example</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="building-provenance.html"><a href="building-provenance.html"><i class="fa fa-check"></i><b>10</b> Building provenance</a><ul>
<li class="chapter" data-level="10.1" data-path="building-provenance.html"><a href="building-provenance.html#using-the-prov-editor"><i class="fa fa-check"></i><b>10.1</b> Using the prov editor</a></li>
<li class="chapter" data-level="10.2" data-path="building-provenance.html"><a href="building-provenance.html#understanding-resource-maps"><i class="fa fa-check"></i><b>10.2</b> Understanding resource maps</a></li>
<li class="chapter" data-level="10.3" data-path="building-provenance.html"><a href="building-provenance.html#using-the-datapack-package"><i class="fa fa-check"></i><b>10.3</b> Using the <code>datapack</code> package</a><ul>
<li class="chapter" data-level="10.3.1" data-path="building-provenance.html"><a href="building-provenance.html#fixing-mistakes"><i class="fa fa-check"></i><b>10.3.1</b> Fixing mistakes</a></li>
</ul></li>
<li class="chapter" data-level="10.4" data-path="building-provenance.html"><a href="building-provenance.html#references"><i class="fa fa-check"></i><b>10.4</b> References</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://nceas.github.io/datateam-training/reference" target="blank">Reference Guide</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">NCEAS Data Team Training</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="editing-eml" class="section level1">
<h1><span class="header-section-number">Chapter 4</span> Editing EML</h1>
<p>This chapter is a practical tutorial for using R to read, edit, write, and validate EML documents. Much of the information here can also be found in the vignettes for the R packages used in this section (e.g. the <a href = 'https://github.com/ropensci/EML/blob/master/vignettes/creating-EML.Rmd' target='_blank'>EML package</a>).</p>
<div id="get-package-and-eml" class="section level2">
<h2><span class="header-section-number">4.1</span> Get package and EML</h2>
<p>Before we look more in depth at EML, we first need to load your data package into R. After <a href="https://nceas.github.io/datateam-training/reference/set-dataone-nodes.html">setting your node</a>, use the following commands to load the package:</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb19-1" data-line-number="1">rm_pid &lt;-<span class="st"> &quot;your_resource_map_pid&quot;</span></a>
<a class="sourceLine" id="cb19-2" data-line-number="2"></a>
<a class="sourceLine" id="cb19-3" data-line-number="3">pkg &lt;-<span class="st"> </span><span class="kw">get_package</span>(adc_test,</a>
<a class="sourceLine" id="cb19-4" data-line-number="4">                   rm_pid,</a>
<a class="sourceLine" id="cb19-5" data-line-number="5">                   <span class="dt">file_names =</span> <span class="ot">TRUE</span>)</a></code></pre></div>
<p>After loading the package, you can also load the EML file into R using the following command:</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb20-1" data-line-number="1">doc &lt;-<span class="st"> </span><span class="kw">read_eml</span>(<span class="kw">getObject</span>(adc_test, pkg<span class="op">$</span>metadata))</a></code></pre></div>
<p>Note that we named the object <code>doc</code>. This is a good generic name to use for EML documents. The generic name <code>eml</code> should not be used - as the EML package ships with an <code>eml</code> function, which can cause namespace issues in your environment if you have an object also called <code>eml</code>.</p>
<div class="note">
<p>
<strong>Tip to always have the most recent resource map.</strong>
</p>
<p>
When editing data packages, you always want to be working with the most recent update. To ensure you have the most recent resource map, you can use the following commands:
</p>
<pre class="sourceCode r"><code class="sourceCode r">rm_pid_original &lt;-<span class="st"> &quot;your_original_resource_map_pid&quot;</span>
all_rm_versions &lt;-<span class="st"> </span><span class="op"></span><span class="kw">get_all_versions</span>(adc_test, rm_pid_original)
rm_pid &lt;-<span class="st"> </span>all_rm_versions[<span class="kw">length</span>(all_rm_versions)]
print(rm_pid)</code></pre>
</div>
</div>
<div id="edit-an-eml-element" class="section level2">
<h2><span class="header-section-number">4.2</span> Edit an EML element</h2>
<p>There are multiple ways to edit an EML element.</p>
<div id="edit-eml-with-strings" class="section level3">
<h3><span class="header-section-number">4.2.1</span> Edit EML with strings</h3>
<p>The most basic way to edit an EML element would be to navigate to the element and replace it with something else. Easy!</p>
<p>For example, to change the title one could use the following command:</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb21-1" data-line-number="1">doc<span class="op">$</span>dataset<span class="op">$</span>title &lt;-<span class="st"> &quot;New Title&quot;</span></a></code></pre></div>
<p>If the element you are editing allows for multiple values, you can pass it a list of character strings. Since a dataset can have multiple titles, we can do this:</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb22-1" data-line-number="1">doc<span class="op">$</span>dataset<span class="op">$</span>title &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="st">&quot;New Title&quot;</span>, <span class="st">&quot;Second New Title&quot;</span>)</a></code></pre></div>
<p>However, this isn’t always the best method to edit the EML, particularly if the element has sub-elements.</p>
</div>
<div id="edit-eml-with-the-eml-package" class="section level3">
<h3><span class="header-section-number">4.2.2</span> Edit EML with the “EML” package</h3>
<p>To edit a section where you are not 100% sure of the sub-elements, using the <code>eml$elementName()</code> helper functions from the EML package will pre-populate the options for you if you utilize the RStudio autocomplete functionality. The arguments in these functions show the available slots for any given EML element. For example, typing <code>doc$dataset$abstract &lt;- eml$abstract()&lt;TAB&gt;</code> will show you that the <code>abstract</code> element can take either the <code>section</code> or <code>para</code> sub-elements.</p>
<p><img src="../images/eml_function_autocomplete.png" /></p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb23-1" data-line-number="1">doc<span class="op">$</span>dataset<span class="op">$</span>abstract &lt;-<span class="st"> </span>eml<span class="op">$</span><span class="kw">abstract</span>(<span class="dt">para =</span> <span class="st">&quot;A concise but thorough description of the who, what, where, when, why, and how of a dataset.&quot;</span>)</a></code></pre></div>
<p>This inserts the abstract with a <code>para</code> element in our dataset, which we know from the EML <a href="https://knb.ecoinformatics.org/external//emlparser/docs/eml-2.1.1/index.html">schema</a> is valid.</p>
<p>Note that the above is equivalent to the following generic construction:</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb24-1" data-line-number="1">doc<span class="op">$</span>dataset<span class="op">$</span>abstract &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="dt">para =</span> <span class="st">&quot;A concise but thorough description of the who, what, where, when, why, and how of a dataset.&quot;</span>)</a></code></pre></div>
<p>The <code>eml()</code> family of functions provides the sub-elements as arguments, which is extremely helpful, but functionally all it is doing is creating a named list, which you can also do using the <code>list</code> function.</p>
</div>
<div id="edit-eml-with-objects" class="section level3">
<h3><span class="header-section-number">4.2.3</span> Edit EML with objects</h3>
<p>A final way to edit an EML element would be to build a new object to replace the old object. To begin, you might create an object using an <code>eml</code> helper function. Let’s take keywords as an example. Sometimes keyword lists in a metadata record will come from different thesauruses, which you can then add in series (similar to the way we added multiple titles) to the element <code>keywordSet</code>.</p>
<p>We start by creating our first set of keywords and saving it to an object.</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb25-1" data-line-number="1">kw_list_<span class="dv">1</span> &lt;-<span class="st"> </span>eml<span class="op">$</span><span class="kw">keywordSet</span>(<span class="dt">keywordThesaurus =</span> <span class="st">&quot;LTER controlled vocabulary&quot;</span>,</a>
<a class="sourceLine" id="cb25-2" data-line-number="2">                            <span class="dt">keyword =</span> <span class="kw">list</span>(<span class="st">&quot;bacteria&quot;</span>, <span class="st">&quot;carnivorous plants&quot;</span>, <span class="st">&quot;genetics&quot;</span>, <span class="st">&quot;thresholds&quot;</span>))</a></code></pre></div>
<p>Which returns:</p>
<pre><code>$keyword
$keyword[[1]]
[1] &quot;bacteria&quot;

$keyword[[2]]
[1] &quot;carnivorous plants&quot;

$keyword[[3]]
[1] &quot;genetics&quot;

$keyword[[4]]
[1] &quot;thresholds&quot;


$keywordThesaurus
[1] &quot;LTER controlled vocabulary&quot;</code></pre>
<p>We create the second keyword list similarly:</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb27-1" data-line-number="1">kw_list_<span class="dv">2</span> &lt;-<span class="st"> </span>eml<span class="op">$</span><span class="kw">keywordSet</span>(<span class="dt">keywordThesaurus =</span> <span class="st">&quot;LTER core area&quot;</span>, </a>
<a class="sourceLine" id="cb27-2" data-line-number="2">                            <span class="dt">keyword =</span>  <span class="kw">list</span>(<span class="st">&quot;populations&quot;</span>, <span class="st">&quot;inorganic nutrients&quot;</span>, <span class="st">&quot;disturbance&quot;</span>))</a></code></pre></div>
<p>Finally, we can insert our two keyword lists into our EML document just like we did with the title example above, but rather than passing character strings into <code>list()</code>, we will pass our two keyword set objects.</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb28-1" data-line-number="1">doc<span class="op">$</span>dataset<span class="op">$</span>keywordSet &lt;-<span class="st"> </span><span class="kw">list</span>(kw_list_<span class="dv">1</span>, kw_list_<span class="dv">2</span>)</a></code></pre></div>
<p>Note that you <strong>must</strong> use the function <code>list</code> here and not the <code>c()</code> function. The reasons for this are complex, and due to some technical subtlety in R - but the gist of the issue is that the <code>c()</code> function can behave in unexpected ways with nested lists, and frequently will collapse the nesting into a single level, resulting in invalid EML.</p>
</div>
</div>
<div id="edit-attributelists" class="section level2">
<h2><span class="header-section-number">4.3</span> Edit attributeLists</h2>
<p>Attributes are stored in an <a href="https://eml.ecoinformatics.org/images/eml-attribute.png">attributeList</a>. When editing attributes in R, you need to create one to three objects:</p>
<ol style="list-style-type: decimal">
<li>A data.frame of attributes</li>
<li>A data.frame of custom units (if applicable)</li>
<li>A data.frame of factors (if applicable)</li>
</ol>
<p>Attributes can exist in EML for <code>dataTable</code>, <code>otherEntity</code>, and <code>spatialVector</code> data objects. Please note that submitting attribute information through the website will store them in an <code>otherEntity</code> object by default. We prefer to store them in a <code>dataTable</code> object for tabular data or a <code>spatialVector</code> object for spatial data.</p>
<p>To edit or examine an existing attribute table already in an EML file, you can use the following commands, where <code>i</code> represents the index of the series element you are interested in. Note that if there is only one item in the series (ie there is only one <code>dataTable</code>), you should just call <code>doc$dataset$dataTable</code>, as in this case <code>doc$dataset$dataTable[[1]]</code> will return the first sub-element of the <code>dataTable</code> (the <code>entityName</code>)</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb29-1" data-line-number="1"><span class="co"># If they are stored in an otherEntity (submitted from the website by default)</span></a>
<a class="sourceLine" id="cb29-2" data-line-number="2">attributeList &lt;-<span class="st"> </span>EML<span class="op">::</span><span class="kw">get_attributes</span>(doc<span class="op">$</span>dataset<span class="op">$</span>otherEntity[[i]]<span class="op">$</span>attributeList)</a>
<a class="sourceLine" id="cb29-3" data-line-number="3"><span class="co"># Or if they are stored in a dataTable (usually created by a datateam member)</span></a>
<a class="sourceLine" id="cb29-4" data-line-number="4">attributeList &lt;-<span class="st"> </span>EML<span class="op">::</span><span class="kw">get_attributes</span>(doc<span class="op">$</span>dataset<span class="op">$</span>dataTable[[i]]<span class="op">$</span>attributeList)</a>
<a class="sourceLine" id="cb29-5" data-line-number="5"><span class="co"># Or if they are stored in a spatialVector (usually created by a datateam member)</span></a>
<a class="sourceLine" id="cb29-6" data-line-number="6">attributeList &lt;-<span class="st"> </span>EML<span class="op">::</span><span class="kw">get_attributes</span>(doc<span class="op">$</span>dataset<span class="op">$</span>spatialVector[[i]]<span class="op">$</span>attributeList)</a>
<a class="sourceLine" id="cb29-7" data-line-number="7"></a>
<a class="sourceLine" id="cb29-8" data-line-number="8">attributes &lt;-<span class="st"> </span>attributeList<span class="op">$</span>attributes</a>
<a class="sourceLine" id="cb29-9" data-line-number="9"><span class="kw">print</span>(attributes)</a></code></pre></div>
<div id="edit-attributes" class="section level3">
<h3><span class="header-section-number">4.3.1</span> Edit attributes</h3>
<p>Attribute information should be stored in a <code>data.frame</code> with the following columns:</p>
<ul>
<li><strong>attributeName</strong>: The name of the attribute as listed in the csv. Required. e.g.: “c_temp”</li>
<li><strong>attributeLabel</strong>: A descriptive label that can be used to display the name of an attribute. It is not constrained by system limitations on length or special characters. Optional. e.g.: “Temperature (Celsius)”</li>
<li><strong>attributeDefinition</strong>: Longer description of the attribute, including the required context for interpreting the <code>attributeName</code>. Required. e.g.: “The near shore water temperature in the upper inter-tidal zone, measured in degrees Celsius.”</li>
<li><strong>measurementScale</strong>: One of: nominal, ordinal, dateTime, ratio, interval. Required.
<ul>
<li><em>nominal</em>: unordered categories or text. e.g.: (Male, Female) or (Yukon River, Kuskokwim River)</li>
<li><em>ordinal</em>: ordered categories. e.g.: Low, Medium, High</li>
<li><em>dateTime</em>: date or time values from the Gregorian calendar. e.g.: 01-01-2001</li>
<li><em>ratio</em>: measurement scale with a meaningful zero point in nature. Ratios are proportional to the measured variable. e.g.: 0 Kelvin represents a complete absence of heat. 200 Kelvin is half as hot as 400 Kelvin. 1.2 meters per second is twice as fast as 0.6 meters per second.</li>
<li><em>interval</em>: values from a scale with equidistant points, where the zero point is arbitrary. This is usually reserved for degrees Celsius or Fahrenheit, or latitude and longitude coordinates, or any other human-constructed scale. e.g.: there is still heat at 0° Celsius; 12° Celsius is NOT half as hot as 24° Celsius.</li>
</ul></li>
<li><strong>domain</strong>: One of: <code>textDomain</code>, <code>enumeratedDomain</code>, <code>numericDomain</code>, <code>dateTime</code>. Required.
<ul>
<li><em>textDomain</em>: text that is free-form, or matches a pattern</li>
<li><em>enumeratedDomain</em>: text that belongs to a defined list of codes and definitions. e.g.: CASC = Cascade Lake, HEAR = Heart Lake</li>
<li><em>dateTimeDomain</em>: <code>dateTime</code> attributes</li>
<li><em>numericDomain</em>: attributes that are numbers (either <code>ratio</code> or <code>interval</code>)</li>
</ul></li>
<li><strong>formatString</strong>: Required for <code>dateTime</code>, NA otherwise. Format string for dates, e.g. “DD/MM/YYYY”.</li>
<li><strong>definition</strong>: Required for <code>textDomain</code>, NA otherwise. Definition for attributes that are a character string, matches attribute definition in most cases.</li>
<li><strong>unit</strong>: Required for <code>numericDomain</code>, NA otherwise. Unit string. If the unit is not a standard unit, a warning will appear when you create the attribute list, saying that it has been forced into a custom unit. Use caution here to make sure the unit really needs to be a custom unit. A list of standard units can be found <a href="https://knb.ecoinformatics.org/#external//emlparser/docs/eml-2.1.1/./eml-unitTypeDefinitions.html#StandardUnitDictionary">here</a>.</li>
<li><strong>numberType</strong>: Required for <code>numericDomain</code>, NA otherwise. Options are <code>real</code>, <code>natural</code>, <code>whole</code>, and <code>integer</code>.
<ul>
<li><em>real</em>: positive and negative fractions and integers (…-1,-0.25,0,0.25,1…)</li>
<li><em>natural</em>: non-zero positive integers (1,2,3…)</li>
<li><em>whole</em>: positive integers and zero (0,1,2,3…)</li>
<li><em>integer</em>: positive and negative integers and zero (…-2,-1,0,1,2…)</li>
</ul></li>
<li><strong>missingValueCode</strong>: Code for missing values (e.g.: ‘-999’, ‘NA’, ‘NaN’). NA otherwise. Note that an NA missing value code should be a string, ‘NA’, and numbers should also be strings, ‘-999.’</li>
<li><strong>missingValueCodeExplanation</strong>: Explanation for missing values, NA if no missing value code exists.</li>
</ul>
<p>You can create attributes manually by typing them out in R following a workflow similar to the one below:</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb30-1" data-line-number="1">attributes &lt;-<span class="st"> </span><span class="kw">data.frame</span>(</a>
<a class="sourceLine" id="cb30-2" data-line-number="2">    </a>
<a class="sourceLine" id="cb30-3" data-line-number="3">    <span class="dt">attributeName =</span> <span class="kw">c</span>(<span class="st">&#39;Date&#39;</span>, <span class="st">&#39;Location&#39;</span>, <span class="st">&#39;Region&#39;</span>,<span class="st">&#39;Sample_No&#39;</span>, <span class="st">&#39;Sample_vol&#39;</span>, <span class="st">&#39;Salinity&#39;</span>, <span class="st">&#39;Temperature&#39;</span>, <span class="st">&#39;sampling_comments&#39;</span>),</a>
<a class="sourceLine" id="cb30-4" data-line-number="4">    <span class="dt">attributeDefinition =</span> <span class="kw">c</span>(<span class="st">&#39;Date sample was taken on&#39;</span>, <span class="st">&#39;Location code representing location where sample was taken&#39;</span>,<span class="st">&#39;Region where sample was taken&#39;</span>, <span class="st">&#39;Sample number&#39;</span>, <span class="st">&#39;Sample volume&#39;</span>, <span class="st">&#39;Salinity of sample in PSU&#39;</span>, <span class="st">&#39;Temperature of sample&#39;</span>, <span class="st">&#39;comments about sampling process&#39;</span>),</a>
<a class="sourceLine" id="cb30-5" data-line-number="5">    <span class="dt">measurementScale =</span> <span class="kw">c</span>(<span class="st">&#39;dateTime&#39;</span>, <span class="st">&#39;nominal&#39;</span>,<span class="st">&#39;nominal&#39;</span>, <span class="st">&#39;nominal&#39;</span>, <span class="st">&#39;ratio&#39;</span>, <span class="st">&#39;ratio&#39;</span>, <span class="st">&#39;interval&#39;</span>, <span class="st">&#39;nominal&#39;</span>),</a>
<a class="sourceLine" id="cb30-6" data-line-number="6">    <span class="dt">domain =</span> <span class="kw">c</span>(<span class="st">&#39;dateTimeDomain&#39;</span>, <span class="st">&#39;enumeratedDomain&#39;</span>,<span class="st">&#39;enumeratedDomain&#39;</span>, <span class="st">&#39;textDomain&#39;</span>, <span class="st">&#39;numericDomain&#39;</span>, <span class="st">&#39;numericDomain&#39;</span>, <span class="st">&#39;numericDomain&#39;</span>, <span class="st">&#39;textDomain&#39;</span>),</a>
<a class="sourceLine" id="cb30-7" data-line-number="7">    <span class="dt">formatString =</span> <span class="kw">c</span>(<span class="st">&#39;MM-DD-YYYY&#39;</span>, <span class="ot">NA</span>,<span class="ot">NA</span>,<span class="ot">NA</span>,<span class="ot">NA</span>,<span class="ot">NA</span>,<span class="ot">NA</span>,<span class="ot">NA</span>),</a>
<a class="sourceLine" id="cb30-8" data-line-number="8">    <span class="dt">definition =</span> <span class="kw">c</span>(<span class="ot">NA</span>,<span class="ot">NA</span>,<span class="ot">NA</span>,<span class="st">&#39;Sample number&#39;</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="st">&#39;comments about sampling process&#39;</span>),</a>
<a class="sourceLine" id="cb30-9" data-line-number="9">    <span class="dt">unit =</span> <span class="kw">c</span>(<span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>,<span class="st">&#39;milliliter&#39;</span>, <span class="st">&#39;dimensionless&#39;</span>, <span class="st">&#39;celsius&#39;</span>, <span class="ot">NA</span>),</a>
<a class="sourceLine" id="cb30-10" data-line-number="10">    <span class="dt">numberType =</span> <span class="kw">c</span>(<span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>,<span class="ot">NA</span>, <span class="st">&#39;real&#39;</span>, <span class="st">&#39;real&#39;</span>, <span class="st">&#39;real&#39;</span>, <span class="ot">NA</span>),</a>
<a class="sourceLine" id="cb30-11" data-line-number="11">    <span class="dt">missingValueCode =</span> <span class="kw">c</span>(<span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>,<span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="st">&#39;NA&#39;</span>),</a>
<a class="sourceLine" id="cb30-12" data-line-number="12">    <span class="dt">missingValueCodeExplanation =</span> <span class="kw">c</span>(<span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>,<span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="st">&#39;no sampling comments&#39;</span>),</a>
<a class="sourceLine" id="cb30-13" data-line-number="13">    </a>
<a class="sourceLine" id="cb30-14" data-line-number="14">    <span class="dt">stringsAsFactors =</span> <span class="ot">FALSE</span>)</a></code></pre></div>
<p>However, typing this out in R can be a major pain. Luckily, there is a Shiny app that you can use to build attribute information. You can use the app to build attributes from a data file loaded into R (recommended as the app will auto-fill some fields for you), to edit an existing attribute table, or to create attributes from scratch. Use the following commands to create or modify attributes (these commands will launch a Shiny app in your web browser):</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb31-1" data-line-number="1"><span class="co"># From data (recommended)</span></a>
<a class="sourceLine" id="cb31-2" data-line-number="2">datamgmt<span class="op">::</span><span class="kw">create_attributes_table</span>(<span class="dt">data =</span> data)</a>
<a class="sourceLine" id="cb31-3" data-line-number="3"></a>
<a class="sourceLine" id="cb31-4" data-line-number="4"><span class="co"># From an existing attribute table</span></a>
<a class="sourceLine" id="cb31-5" data-line-number="5">datamgmt<span class="op">::</span><span class="kw">create_attributes_table</span>(<span class="dt">attributes_table =</span> attributes_table)</a>
<a class="sourceLine" id="cb31-6" data-line-number="6"></a>
<a class="sourceLine" id="cb31-7" data-line-number="7"><span class="co"># From scratch</span></a>
<a class="sourceLine" id="cb31-8" data-line-number="8">datamgmt<span class="op">::</span><span class="kw">create_attributes_table</span>()</a></code></pre></div>
<p>Once you are done editing a table in the app, click the <code>Print</code> button to print text of a code that will build a data.frame in R. Copy that code and assign it to a variable in your script (e.g. <code>attributes &lt;- data.frame(...)</code>).</p>
<p>For simple attribute corrections, <code>datamgmt::edit_attribute()</code> allows you to edit the slots of a single attribute within an attribute list.</p>
</div>
<div id="edit-custom-units" class="section level3">
<h3><span class="header-section-number">4.3.2</span> Edit custom units</h3>
<p>EML has a set list of units that can be added to an EML file. These can be seen by using the following code:</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb32-1" data-line-number="1">standardUnits &lt;-<span class="st"> </span>EML<span class="op">::</span><span class="kw">get_unitList</span>()</a>
<a class="sourceLine" id="cb32-2" data-line-number="2"><span class="kw">View</span>(standardUnits<span class="op">$</span>units)</a></code></pre></div>
<p>If you have units that are not in the standard EML unit list, you will need to build a custom unit list. A unit typically consists of the following fields:</p>
<ul>
<li><strong>id</strong>: The <code>unit id</code> (ids are camelCased)</li>
<li><strong>unitType</strong>: The <code>unitType</code> (run <code>View(standardUnits$unitTypes)</code> to see standard <code>unitType</code>s)</li>
<li><strong>parentSI</strong>: The <code>parentSI</code> unit (e.g. for kilometer <code>parentSI</code> = “meter”)</li>
<li><strong>multiplierToSI</strong>: Multiplier to the <code>parentSI</code> unit (e.g. for kilometer <code>multiplierToSI</code> = 1000)</li>
<li><strong>name</strong>: Unit abbreviation (e.g. for kilometer <code>name</code> = “km”)</li>
<li><strong>description</strong>: Text defining the unit (e.g. for kilometer <code>description</code> = “1000 meters”)</li>
</ul>
<p>Additionally, <code>datamgmt::create_attributes_table()</code> will tell you if each of your units are standard or not. If your unit is not standard, you should use the following code to help auto-generate a custom unit:</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb33-1" data-line-number="1">datamgmt<span class="op">::</span><span class="kw">return_eml_units</span>(<span class="st">&quot;your_unit&quot;</span>)</a></code></pre></div>
<p>Note that <code>datamgmt::create_attributes_table()</code> calls <code>datamgmt::return_eml_units()</code> for you! <code>datamgmt::return_eml_units()</code> will auto-generate many of these fields for you (<strong>but don’t just assume the auto-generation will be perfect; always ensure the auto-generation correctly handles your unit</strong>.)</p>
</div>
<div id="edit-factors" class="section level3">
<h3><span class="header-section-number">4.3.3</span> Edit factors</h3>
<p>For attributes that are <code>enumeratedDomains</code>, a table is needed with three columns: <code>attributeName</code>, <code>code</code>, and <code>definition</code>.</p>
<ul>
<li><strong>attributeName</strong> should be the same as the <code>attributeName</code> within the attribute table and repeated for all codes belonging to a common attribute.</li>
<li><strong>code</strong> should contain all unique values of the given <code>attributeName</code> that exist within the actual data.</li>
<li><strong>definition</strong> should contain a plain text definition that describes each code.</li>
</ul>
<p>There is a tab in the <code>datamgmt::create_attributes_table()</code> app that will help you build factors.</p>
<p>If you need to build factors by hand, you can use named character vectors and then convert them to a data.frame as shown in the example below. In this example, there are two enumerated domains in the attribute list - “Location” and “Region”.</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb34-1" data-line-number="1">Location &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dt">CASC =</span> <span class="st">&#39;Cascade Lake&#39;</span>, <span class="dt">CHIK =</span> <span class="st">&#39;Chikumunik Lake&#39;</span>, <span class="dt">HEAR =</span> <span class="st">&#39;Heart Lake&#39;</span>, <span class="dt">NISH =</span> <span class="st">&#39;Nishlik Lake&#39;</span> )</a>
<a class="sourceLine" id="cb34-2" data-line-number="2">Region &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dt">W_MTN =</span> <span class="st">&#39;West region, locations West of Eagle Mountain&#39;</span>, <span class="dt">E_MTN =</span> <span class="st">&#39;East region, locations East of Eagle Mountain&#39;</span>)</a></code></pre></div>
<p>The definitions are then written into a data.frame using the names of the named character vectors and their definitions.</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb35-1" data-line-number="1">factors &lt;-<span class="st"> </span><span class="kw">rbind</span>(<span class="kw">data.frame</span>(<span class="dt">attributeName =</span> <span class="st">&#39;Location&#39;</span>, <span class="dt">code =</span> <span class="kw">names</span>(Location), <span class="dt">definition =</span> <span class="kw">unname</span>(Location)),</a>
<a class="sourceLine" id="cb35-2" data-line-number="2">                  <span class="kw">data.frame</span>(<span class="dt">attributeName =</span> <span class="st">&#39;Region&#39;</span>, <span class="dt">code =</span> <span class="kw">names</span>(Region), <span class="dt">definition =</span> <span class="kw">unname</span>(Region)))</a></code></pre></div>
</div>
<div id="finalize-attributelist" class="section level3">
<h3><span class="header-section-number">4.3.4</span> Finalize attributeList</h3>
<p>Once you have built your attributes, factors, and custom units, you can add them to EML objects. Attributes and factors are combined to form an <code>attributeList</code> using the following command:</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb36-1" data-line-number="1">attributeList &lt;-<span class="st"> </span>EML<span class="op">::</span><span class="kw">set_attributes</span>(<span class="dt">attributes =</span> attributes,</a>
<a class="sourceLine" id="cb36-2" data-line-number="2">                                     <span class="dt">factors =</span> factors) </a></code></pre></div>
<p>This <code>attributeList</code> must then be <a href="editing-eml.html#edit-datatables">added to a <code>dataTable</code></a>. Custom units are added to <code>additionalMetadata</code> using the following command:</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb37-1" data-line-number="1">unitlist &lt;-<span class="st"> </span><span class="kw">set_unitList</span>(custom_units)</a>
<a class="sourceLine" id="cb37-2" data-line-number="2">doc<span class="op">$</span>additionalMetadata &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="kw">as</span>(unitlist, <span class="st">&quot;additionalMetadata&quot;</span>))</a></code></pre></div>
</div>
</div>
<div id="set-physical" class="section level2">
<h2><span class="header-section-number">4.4</span> Set physical</h2>
<p>To set the <code>physical</code> aspects of a data object, use the following commands to build a <code>physical</code> object from a data <code>PID</code> that exists in your package. <strong>Remember to <a href="https://nceas.github.io/datateam-training/reference/set-dataone-nodes.html">set the member node</a> to test.arcticdata.io !</strong></p>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb38-1" data-line-number="1">physical &lt;-<span class="st"> </span>arcticdatautils<span class="op">::</span><span class="kw">pid_to_eml_physical</span>(mn, pkg<span class="op">$</span>data[[i]])</a></code></pre></div>
<p>Alternatively, you can set the <code>physical</code> of a data object not yet in your package by simply inputting the data <code>PID</code>:</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb39-1" data-line-number="1">physical &lt;-<span class="st"> </span>arcticdatautils<span class="op">::</span><span class="kw">pid_to_eml_physical</span>(mn, <span class="st">&quot;your_data_pid&quot;</span>)</a></code></pre></div>
<p>The <code>physical</code> must then be assigned to the data object.</p>
<p>A final, but not recommended option, is to set the <code>physical</code> by hand. To do so, one can use a workflow similar to the one below. However, the far superior workflow is to <a href="creating-a-data-package.html#publish-an-object">publish</a> or <a href="#update-a-data-file">update</a> your data first and then use <code>pid_to_eml_physical()</code> to set the <code>physical</code>.</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb40-1" data-line-number="1">id &lt;-<span class="st"> &#39;your_data_pid&#39;</span> <span class="co"># this should be an actual PID</span></a>
<a class="sourceLine" id="cb40-2" data-line-number="2">path &lt;-<span class="st"> &#39;~/your/data/path&#39;</span> <span class="co"># path to data table</span></a>
<a class="sourceLine" id="cb40-3" data-line-number="3">physical &lt;-<span class="st"> </span>EML<span class="op">::</span><span class="kw">set_physical</span>(<span class="dt">objectName =</span> <span class="st">&#39;your_file_name&#39;</span>,</a>
<a class="sourceLine" id="cb40-4" data-line-number="4">                              <span class="dt">size =</span> <span class="kw">as.character</span>(<span class="kw">file.size</span>(path)),</a>
<a class="sourceLine" id="cb40-5" data-line-number="5">                              <span class="dt">sizeUnit =</span> <span class="st">&#39;bytes&#39;</span>,</a>
<a class="sourceLine" id="cb40-6" data-line-number="6">                              <span class="dt">authentication =</span> <span class="kw">digest</span>(path, <span class="dt">algo=</span><span class="st">&quot;sha1&quot;</span>, <span class="dt">serialize=</span><span class="ot">FALSE</span>, <span class="dt">file=</span><span class="ot">TRUE</span>),</a>
<a class="sourceLine" id="cb40-7" data-line-number="7">                              <span class="dt">authMethod =</span> <span class="st">&#39;SHA-1&#39;</span>,</a>
<a class="sourceLine" id="cb40-8" data-line-number="8">                              <span class="dt">numHeaderLines =</span> <span class="st">&#39;1&#39;</span>,</a>
<a class="sourceLine" id="cb40-9" data-line-number="9">                              <span class="dt">fieldDelimiter =</span> <span class="st">&#39;,&#39;</span>,</a>
<a class="sourceLine" id="cb40-10" data-line-number="10">                              <span class="dt">url =</span> <span class="kw">paste0</span>(<span class="st">&#39;https://cn.dataone.org/cn/v2/resolve/&#39;</span>, id))</a></code></pre></div>
</div>
<div id="edit-datatables" class="section level2">
<h2><span class="header-section-number">4.5</span> Edit dataTables</h2>
<p>To edit a <code>dataTable</code>, first <a href="editing-eml.html#edit-attributelists">edit/create an <code>attributeList</code></a> and <a href="editing-eml.html#set-physical">set the physical</a>.
Then create a new <code>dataTable</code> using the <code>eml$dataTable()</code> helper function as below:</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb41-1" data-line-number="1">dataTable &lt;-<span class="st"> </span>eml<span class="op">$</span><span class="kw">dataTable</span>(<span class="dt">entityName =</span> <span class="st">&quot;A descriptive name for the data (does not need to be the same as the data file)&quot;</span>,</a>
<a class="sourceLine" id="cb41-2" data-line-number="2">                 <span class="dt">entityDescription =</span> <span class="st">&quot;A description of the data&quot;</span>,</a>
<a class="sourceLine" id="cb41-3" data-line-number="3">                 <span class="dt">physical =</span> physical,</a>
<a class="sourceLine" id="cb41-4" data-line-number="4">                 <span class="dt">attributeList =</span> attributeList)</a></code></pre></div>
<p>The <code>dataTable</code> must then be added to the EML. How exactly you do this will depend on whether there are <code>dataTable</code> elements in your EML, and how many there are. To replace whatever dataTable elements already exist, you could write:</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb42-1" data-line-number="1">doc<span class="op">$</span>dataset<span class="op">$</span>dataTable &lt;-<span class="st"> </span>dataTable</a></code></pre></div>
<p>If there is only one <code>dataTable</code> in your dataset, the EML package will usually “unpack” these, so that it is not contained within a list of length 1 - this means that to add a second <code>dataTable</code>, you cannot use the syntax <code>doc$dataset$dataTable[[2]]</code>, since when unpacked this will contain the <code>entityDescription</code> as opposed to pointing to the second in a series of <code>dataTable</code> elements. Confusing - I know. Not to fear though - this syntax will get you on your way, should you be trying to add a second <code>dataTable</code>.</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb43-1" data-line-number="1">doc<span class="op">$</span>dataset<span class="op">$</span>dataTable &lt;-<span class="st"> </span><span class="kw">list</span>(doc<span class="op">$</span>dataset<span class="op">$</span>dataTable, dataTable)</a></code></pre></div>
<p>If there is more than one <code>dataTable</code> in your dataset, you can return to the more straightforward construction of:</p>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb44-1" data-line-number="1">doc<span class="op">$</span>dataset<span class="op">$</span>dataTable[[i]] &lt;-<span class="st"> </span>dataTable </a></code></pre></div>
<p>Where <code>i</code> is the index that you wish insert your <code>dataTable</code> into.</p>
</div>
<div id="edit-otherentities" class="section level2">
<h2><span class="header-section-number">4.6</span> Edit otherEntities</h2>
<div id="remove-otherentities" class="section level3">
<h3><span class="header-section-number">4.6.1</span> Remove otherEntities</h3>
<p>To remove an <code>otherEntity</code> use the following command. This may be useful if a data object is originally listed as an <code>otherEntity</code> and then transferred to a <code>dataTable</code>.</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb45-1" data-line-number="1">doc<span class="op">$</span>dataset<span class="op">$</span>otherEntity[[i]] &lt;-<span class="st"> </span><span class="ot">NULL</span></a></code></pre></div>
</div>
<div id="create-otherentities" class="section level3">
<h3><span class="header-section-number">4.6.2</span> Create otherEntities</h3>
<p>If you need to create/update an <code>otherEntity</code>, make sure to <a href="creating-a-data-package.html#publish-an-object">publish</a> or <a href="#update-a-data-file">update</a> your data object first (if it is not already on the DataONE MN). Then build your <code>otherEntity</code>.</p>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb46-1" data-line-number="1">otherEntity &lt;-<span class="st"> </span>arcticdatautils<span class="op">::</span><span class="kw">pid_to_eml_entity</span>(mn, pkg<span class="op">$</span>data[[i]])</a></code></pre></div>
<p>Alternatively, you can build the <code>otherEntity</code> of a data object not in your package by simply inputting the data <code>PID</code>.</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb47-1" data-line-number="1">otherEntity &lt;-<span class="st"> </span>arcticdatautils<span class="op">::</span><span class="kw">pid_to_eml_entity</span>(mn, <span class="st">&quot;your_data_pid&quot;</span>, <span class="dt">entityType =</span> <span class="st">&quot;otherEntity&quot;</span>, <span class="dt">entityName =</span> <span class="st">&quot;Entity Name&quot;</span>, <span class="dt">entityDescription =</span> <span class="st">&quot;Description about entity&quot;</span>)</a></code></pre></div>
<p>The <code>otherEntity</code> must then be set to the EML, like so:</p>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb48-1" data-line-number="1">doc<span class="op">$</span>dataset<span class="op">$</span>otherEntity &lt;-<span class="st"> </span>otherEntity</a></code></pre></div>
<p>If you have more than one <code>otherEntity</code> object in the EML already, you can add the new one like this:</p>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb49-1" data-line-number="1">doc<span class="op">$</span>dataset<span class="op">$</span>otherEntity[[i]] &lt;-<span class="st"> </span>otherEntity</a></code></pre></div>
<p>Where <code>i</code> is set to the number of existing entities plus one.</p>
<p>Remember the warning from the last section, however. If you only have one <code>otherEntity</code>, and you are trying to add another, you have to run:</p>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb50-1" data-line-number="1">doc<span class="op">$</span>dataset<span class="op">$</span>otherEntity &lt;-<span class="st"> </span><span class="kw">list</span>(otherEntity, doc<span class="op">$</span>dataset<span class="op">$</span>otherEntity)</a></code></pre></div>
</div>
</div>
<div id="edit-spatialvectors" class="section level2">
<h2><span class="header-section-number">4.7</span> Edit spatialVectors</h2>
<p>Occasionally, you may encounter a third type of data object: <code>spatialVector</code>. This object contains spatial data, such as a shapefile or geodatabase. Editing a <code>spatialVector</code> is similar to editing a <code>dataTable</code> or an <code>otherEntity</code>. A <code>physical</code> and <code>attributeList</code> should be present. One important difference is that a <code>spatialVector</code> object should also have a <code>geometry</code> slot that describes the geometry features of the data. The possible values include one or more (in a list) of ‘Point’, ‘LineString’, ‘LinearRing’, ‘Polygon’, ‘MultiPoint’, ‘MultiLineString’, ‘MultiPolygon’, or ‘MultiGeometry’.</p>
<p>To add a <code>geometry</code> slot use:</p>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb51-1" data-line-number="1">doc<span class="op">$</span>dataset<span class="op">$</span>spatialVector[[<span class="dv">1</span>]]<span class="op">$</span>geometry &lt;-<span class="st"> &quot;Polygon&quot;</span></a></code></pre></div>
<p>Additionally, spatial data should typically be archived within a .zip file to ensure all related and interdependent files stay together. For example, a spatial dataset for a shapefile should, at a minimum, consist of separate .dbf, .shp, and .shx files with the same prefix in the same directory. All these files are required in order to use the data. Also note that shapefiles limit attribute names to 10 characters, so attribute names in the metadata may not match exactly to attribute names in the data.</p>
<p>Here is an example of what <code>spatialVector</code> metadata should look like, including <code>physical</code>, <code>attributeList</code>, and <code>geometry</code> slots:</p>
<pre><code>&lt;spatialVector system=&quot;uuid&quot;&gt;
  &lt;entityName&gt;sasap_regions.zip&lt;/entityName&gt;
  &lt;entityDescription&gt;Contains the shapefile depicting the SASAP regions. Zip contains .cpg, .dbf, .prj, .shp, and .shx files.&lt;/entityDescription&gt;
  &lt;physical scope=&quot;document&quot;&gt;
    &lt;objectName&gt;sasap_regions.zip&lt;/objectName&gt;
    &lt;size unit=&quot;bytes&quot;&gt;2533992&lt;/size&gt;
    &lt;authentication method=&quot;SHA1&quot;&gt;2d199f6f1f5f5b36525d1cf1019c0a4551b98762&lt;/authentication&gt;
    &lt;dataFormat&gt;
      &lt;externallyDefinedFormat&gt;
        &lt;formatName&gt;application/zip&lt;/formatName&gt;
      &lt;/externallyDefinedFormat&gt;
    &lt;/dataFormat&gt;
    &lt;distribution scope=&quot;document&quot;&gt;
      &lt;online&gt;
        &lt;url function=&quot;download&quot;&gt;https://cn.dataone.org/cn/v2/resolve/urn:uuid:f6ab206b-312c-4caf-89c8-89eb9d031aac&lt;/url&gt;
      &lt;/online&gt;
    &lt;/distribution&gt;
  &lt;/physical&gt;
  &lt;attributeList&gt;
    &lt;attribute&gt;
      &lt;attributeName&gt;region_id&lt;/attributeName&gt;
      &lt;attributeDefinition&gt;SASAP region ID&lt;/attributeDefinition&gt;
      &lt;measurementScale&gt;
        &lt;interval&gt;
          &lt;unit&gt;
            &lt;standardUnit&gt;dimensionless&lt;/standardUnit&gt;
          &lt;/unit&gt;
          &lt;numericDomain&gt;
            &lt;numberType&gt;natural&lt;/numberType&gt;
          &lt;/numericDomain&gt;
        &lt;/interval&gt;
      &lt;/measurementScale&gt;
    &lt;/attribute&gt;
    &lt;attribute&gt;
      &lt;attributeName&gt;region&lt;/attributeName&gt;
      &lt;attributeDefinition&gt;SASAP region name&lt;/attributeDefinition&gt;
      &lt;measurementScale&gt;
        &lt;nominal&gt;
          &lt;nonNumericDomain&gt;
            &lt;textDomain&gt;
              &lt;definition&gt;SASAP region name&lt;/definition&gt;
            &lt;/textDomain&gt;
          &lt;/nonNumericDomain&gt;
        &lt;/nominal&gt;
      &lt;/measurementScale&gt;
    &lt;/attribute&gt;
  &lt;/attributeList&gt;
  &lt;geometry&gt;Polygon&lt;/geometry&gt;
&lt;/spatialVector&gt;</code></pre>
</div>
<div id="set-coverages" class="section level2">
<h2><span class="header-section-number">4.8</span> Set coverages</h2>
<p>Sometimes EML documents may lack coverage information describing the temporal, geographic, or taxonomic coverage of a data set. This example shows how to create coverage information from scratch, or replace an existing coverage element with an updated one. You can view the current coverage (if it exists) by entering <code>doc$dataset$coverage</code> into the console. Here the coverage, including temporal, taxonomic, and geographic coverages, is defined using <code>set_coverage()</code>.</p>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb53-1" data-line-number="1">coverage &lt;-<span class="st"> </span>EML<span class="op">::</span><span class="kw">set_coverage</span>(<span class="dt">beginDate =</span> <span class="st">&#39;2012-01-01&#39;</span>, </a>
<a class="sourceLine" id="cb53-2" data-line-number="2">                              <span class="dt">endDate =</span> <span class="st">&#39;2012-01-10&#39;</span>, </a>
<a class="sourceLine" id="cb53-3" data-line-number="3">                              <span class="dt">sci_names =</span> <span class="kw">c</span>(<span class="st">&#39;exampleGenus exampleSpecies1&#39;</span>, <span class="st">&#39;exampleGenus ExampleSpecies2&#39;</span>),</a>
<a class="sourceLine" id="cb53-4" data-line-number="4">                              <span class="dt">geographicDescription =</span> <span class="st">&quot;The geographic region covers the lake region near Eagle Mountain, Alaska.&quot;</span>,</a>
<a class="sourceLine" id="cb53-5" data-line-number="5">                              <span class="dt">west =</span> <span class="fl">-154.6192</span>, </a>
<a class="sourceLine" id="cb53-6" data-line-number="6">                              <span class="dt">east =</span> <span class="fl">-154.5753</span>, </a>
<a class="sourceLine" id="cb53-7" data-line-number="7">                              <span class="dt">north =</span> <span class="fl">68.3831</span>, </a>
<a class="sourceLine" id="cb53-8" data-line-number="8">                              <span class="dt">south =</span> <span class="fl">68.3619</span>)</a>
<a class="sourceLine" id="cb53-9" data-line-number="9">doc<span class="op">$</span>dataset<span class="op">$</span>coverage &lt;-<span class="st"> </span>coverage</a></code></pre></div>
<p>You can also set multiple geographic (or temporal) coverages. Here is an example of how you might set two geographic coverages. Note that we use nested <code>eml</code> function helpers in this construction.</p>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb54-1" data-line-number="1">geocov1 &lt;-<span class="st"> </span>eml<span class="op">$</span><span class="kw">geographicCoverage</span>(<span class="dt">geographicDescription =</span> <span class="st">&quot;The geographich region covers area 1&quot;</span>,</a>
<a class="sourceLine" id="cb54-2" data-line-number="2">                                  <span class="dt">boundingCoordinates =</span> eml<span class="op">$</span><span class="kw">boundingCoordinates</span>(</a>
<a class="sourceLine" id="cb54-3" data-line-number="3">                                         <span class="dt">northBoundingCoordinate =</span> <span class="dv">68</span>,</a>
<a class="sourceLine" id="cb54-4" data-line-number="4">                                         <span class="dt">eastBoundingCoordinate =</span> <span class="dv">-154</span>,</a>
<a class="sourceLine" id="cb54-5" data-line-number="5">                                         <span class="dt">southBoundingCoordinate =</span> <span class="dv">67</span>,</a>
<a class="sourceLine" id="cb54-6" data-line-number="6">                                         <span class="dt">westBoundingCoordinate =</span> <span class="dv">-155</span>))</a>
<a class="sourceLine" id="cb54-7" data-line-number="7"></a>
<a class="sourceLine" id="cb54-8" data-line-number="8">geocov2 &lt;-<span class="st"> </span>eml<span class="op">$</span><span class="kw">geographicCoverage</span>(<span class="dt">geographicDescription =</span> <span class="st">&quot;The geographich region covers area 2&quot;</span>,</a>
<a class="sourceLine" id="cb54-9" data-line-number="9">                                  <span class="dt">boundingCoordinates =</span> eml<span class="op">$</span><span class="kw">boundingCoordinates</span>(</a>
<a class="sourceLine" id="cb54-10" data-line-number="10">                                         <span class="dt">northBoundingCoordinate =</span> <span class="dv">65</span>,</a>
<a class="sourceLine" id="cb54-11" data-line-number="11">                                         <span class="dt">eastBoundingCoordinate =</span> <span class="dv">-151</span>,</a>
<a class="sourceLine" id="cb54-12" data-line-number="12">                                         <span class="dt">southBoundingCoordinate =</span> <span class="dv">62</span>,</a>
<a class="sourceLine" id="cb54-13" data-line-number="13">                                         <span class="dt">westBoundingCoordinate =</span> <span class="dv">-153</span>))</a>
<a class="sourceLine" id="cb54-14" data-line-number="14"></a>
<a class="sourceLine" id="cb54-15" data-line-number="15">coverage &lt;-<span class="st"> </span>EML<span class="op">::</span><span class="kw">set_coverage</span>(<span class="dt">beginDate =</span> <span class="st">&#39;2012-01-01&#39;</span>, </a>
<a class="sourceLine" id="cb54-16" data-line-number="16">                              <span class="dt">endDate =</span> <span class="st">&#39;2012-01-10&#39;</span>, </a>
<a class="sourceLine" id="cb54-17" data-line-number="17">                              <span class="dt">sci_names =</span> <span class="kw">list</span>(<span class="st">&#39;exampleGenus exampleSpecies1&#39;</span>, <span class="st">&#39;exampleGenus ExampleSpecies2&#39;</span>))</a>
<a class="sourceLine" id="cb54-18" data-line-number="18"></a>
<a class="sourceLine" id="cb54-19" data-line-number="19">doc<span class="op">$</span>dataset<span class="op">$</span>coverage<span class="op">$</span>geographicCoverage &lt;-<span class="st"> </span><span class="kw">list</span>(geocov1, geocov2)</a></code></pre></div>
</div>
<div id="set-methods" class="section level2">
<h2><span class="header-section-number">4.9</span> Set methods</h2>
<p>The methods tree in the EML section has many different options, visible in the <a href="https://knb.ecoinformatics.org/emlparser/docs/eml-2.1.1/eml-methods.png">schema</a>. You can create new elements in the methods tree by following the schema and using the <code>eml</code> helpers.</p>
<p>Another simple and potentially useful way to add methods to an EML that has no methods at all is by adding them via a MS Word document. An example is shown below:</p>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb55-1" data-line-number="1">methods1 &lt;-<span class="st"> </span><span class="kw">set_methods</span>(<span class="st">&#39;methods_doc.docx&#39;</span>)</a>
<a class="sourceLine" id="cb55-2" data-line-number="2">doc<span class="op">$</span>dataset<span class="op">$</span>methods &lt;-<span class="st"> </span>methods1</a></code></pre></div>
<p>If you want to make minor changes to existing methods information that has a lot of nested elements, your best bet may be to edit the EML manually in a text editor (or in RStudio), otherwise there is a risk of accidentally overwriting nested elements with blank object classes, therefore losing methods information.</p>
<div id="adding-sampling-info-to-methods-section" class="section level3">
<h3><span class="header-section-number">4.9.1</span> Adding sampling info to methods section</h3>
<div class="sourceCode" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb56-1" data-line-number="1"><span class="co"># add method steps as new variables</span></a>
<a class="sourceLine" id="cb56-2" data-line-number="2">step1 &lt;-<span class="st"> </span>eml<span class="op">$</span><span class="kw">methodStep</span>(<span class="dt">description =</span> <span class="st">&quot;text describing the methods used&quot;</span>)</a>
<a class="sourceLine" id="cb56-3" data-line-number="3"></a>
<a class="sourceLine" id="cb56-4" data-line-number="4">stEx &lt;-<span class="st"> </span>eml<span class="op">$</span><span class="kw">studyExtent</span>(<span class="dt">description =</span> <span class="st">&quot;study extent description&quot;</span>)</a>
<a class="sourceLine" id="cb56-5" data-line-number="5"></a>
<a class="sourceLine" id="cb56-6" data-line-number="6">samp &lt;-<span class="st"> </span>eml<span class="op">$</span><span class="kw">sampling</span>(<span class="dt">studyExtent =</span> stEx,</a>
<a class="sourceLine" id="cb56-7" data-line-number="7">                     <span class="dt">samplingDescription =</span> <span class="st">&quot;sampling description text&quot;</span>)</a>
<a class="sourceLine" id="cb56-8" data-line-number="8"></a>
<a class="sourceLine" id="cb56-9" data-line-number="9"></a>
<a class="sourceLine" id="cb56-10" data-line-number="10"><span class="co"># combine all methods steps and sampling info </span></a>
<a class="sourceLine" id="cb56-11" data-line-number="11">methods1 &lt;-<span class="st"> </span>eml<span class="op">$</span><span class="kw">methods</span>(<span class="dt">methodStep =</span> step1, </a>
<a class="sourceLine" id="cb56-12" data-line-number="12">                        <span class="dt">sampling =</span> samp)</a>
<a class="sourceLine" id="cb56-13" data-line-number="13"></a>
<a class="sourceLine" id="cb56-14" data-line-number="14">doc<span class="op">$</span>dataset<span class="op">$</span>methods &lt;-<span class="st"> </span>methods1</a></code></pre></div>
</div>
</div>
<div id="set-parties" class="section level2">
<h2><span class="header-section-number">4.10</span> Set parties</h2>
<p>To add people, with their addresses, you need to add addresses as their own object class, which you then add to the <code>contact</code>, <code>creator</code>, or <code>associatedParty</code> classes.</p>
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb57-1" data-line-number="1">NCEASadd &lt;-<span class="st"> </span>eml<span class="op">$</span><span class="kw">address</span>( </a>
<a class="sourceLine" id="cb57-2" data-line-number="2">                <span class="dt">deliveryPoint =</span> <span class="st">&quot;735 State St #300&quot;</span>, </a>
<a class="sourceLine" id="cb57-3" data-line-number="3">                <span class="dt">city =</span> <span class="st">&quot;Santa Barbara&quot;</span>, </a>
<a class="sourceLine" id="cb57-4" data-line-number="4">                <span class="dt">administrativeArea =</span> <span class="st">&#39;CA&#39;</span>, </a>
<a class="sourceLine" id="cb57-5" data-line-number="5">                <span class="dt">postalCode =</span> <span class="st">&#39;93101&#39;</span>)</a></code></pre></div>
<p>The <code>creator</code>, <code>contact</code>, and <code>associatedParty</code> classes can easily be created using functions from the <code>arcticdatautils</code> package. Here, we use <code>eml_creator()</code> to set our data set <code>creator</code>.</p>
<div class="sourceCode" id="cb58"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb58-1" data-line-number="1">JC_creator &lt;-<span class="st"> </span>arcticdatautils<span class="op">::</span><span class="kw">eml_creator</span>(<span class="dt">given_names =</span> <span class="st">&quot;Jeanette&quot;</span>, </a>
<a class="sourceLine" id="cb58-2" data-line-number="2">                                           <span class="dt">sur_name =</span> <span class="st">&quot;Clark&quot;</span>, </a>
<a class="sourceLine" id="cb58-3" data-line-number="3">                                           <span class="dt">organization =</span> <span class="st">&quot;NCEAS&quot;</span>, </a>
<a class="sourceLine" id="cb58-4" data-line-number="4">                                           <span class="dt">email =</span> <span class="st">&quot;jclark@nceas.ucsb.edu&quot;</span>, </a>
<a class="sourceLine" id="cb58-5" data-line-number="5">                                           <span class="dt">phone =</span> <span class="st">&quot;123-456-7890&quot;</span>, </a>
<a class="sourceLine" id="cb58-6" data-line-number="6">                                           <span class="dt">userId =</span> <span class="st">&quot;https://orcid.org/WWWW-XXXX-YYYY-ZZZZ&quot;</span>,</a>
<a class="sourceLine" id="cb58-7" data-line-number="7">                                           <span class="dt">address =</span> NCEASadd)</a>
<a class="sourceLine" id="cb58-8" data-line-number="8">doc<span class="op">$</span>dataset<span class="op">$</span>creator &lt;-<span class="st"> </span>JC_creator</a></code></pre></div>
<p>Similarly, we can set the <code>contact</code>s. In this case, there are two, so we set <code>doc$dataset$contact</code> as a list containing both of them.</p>
<div class="sourceCode" id="cb59"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb59-1" data-line-number="1">JC_contact &lt;-<span class="st"> </span>arcticdatautils<span class="op">::</span><span class="kw">eml_contact</span>(<span class="dt">given_names =</span> <span class="st">&quot;Jeanette&quot;</span>, </a>
<a class="sourceLine" id="cb59-2" data-line-number="2">                                           <span class="dt">sur_name =</span> <span class="st">&quot;Clark&quot;</span>, </a>
<a class="sourceLine" id="cb59-3" data-line-number="3">                                           <span class="dt">organization =</span> <span class="st">&quot;NCEAS&quot;</span>, </a>
<a class="sourceLine" id="cb59-4" data-line-number="4">                                           <span class="dt">email =</span> <span class="st">&quot;jclark@nceas.ucsb.edu&quot;</span>, </a>
<a class="sourceLine" id="cb59-5" data-line-number="5">                                           <span class="dt">phone =</span> <span class="st">&quot;123-456-7890&quot;</span>,  </a>
<a class="sourceLine" id="cb59-6" data-line-number="6">                                           <span class="dt">userId =</span> <span class="st">&quot;https://orcid.org/WWWW-XXXX-YYYY-ZZZZ&quot;</span>,</a>
<a class="sourceLine" id="cb59-7" data-line-number="7">                                           <span class="dt">address =</span> NCEASadd)</a>
<a class="sourceLine" id="cb59-8" data-line-number="8"></a>
<a class="sourceLine" id="cb59-9" data-line-number="9">JG_contact &lt;-<span class="st"> </span>arcticdatautils<span class="op">::</span><span class="kw">eml_contact</span>(<span class="dt">given_names =</span> <span class="st">&quot;Jesse&quot;</span>, </a>
<a class="sourceLine" id="cb59-10" data-line-number="10">                                           <span class="dt">sur_name =</span> <span class="st">&quot;Goldstein&quot;</span>, </a>
<a class="sourceLine" id="cb59-11" data-line-number="11">                                           <span class="dt">organization =</span> <span class="st">&quot;NCEAS&quot;</span>, </a>
<a class="sourceLine" id="cb59-12" data-line-number="12">                                           <span class="dt">email =</span> <span class="st">&quot;jgoldstein@nceas.ucsb.edu&quot;</span>, </a>
<a class="sourceLine" id="cb59-13" data-line-number="13">                                           <span class="dt">phone =</span> <span class="st">&quot;123-456-7890&quot;</span>,  </a>
<a class="sourceLine" id="cb59-14" data-line-number="14">                                           <span class="dt">userId =</span> <span class="st">&quot;https://orcid.org/WWWW-XXXX-YYYY-ZZZZ&quot;</span>,</a>
<a class="sourceLine" id="cb59-15" data-line-number="15">                                           <span class="dt">address =</span> NCEASadd)</a>
<a class="sourceLine" id="cb59-16" data-line-number="16"></a>
<a class="sourceLine" id="cb59-17" data-line-number="17">doc<span class="op">$</span>dataset<span class="op">$</span>contact &lt;-<span class="st"> </span><span class="kw">list</span>(JC_contact, JG_contact)</a></code></pre></div>
<p>Finally, the <code>associatedParty</code>s are set. Note that <code>associatedParty</code>s MUST have a role defined, unlike <code>creator</code> or <code>contact</code>.</p>
<div class="sourceCode" id="cb60"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb60-1" data-line-number="1">JG_ap &lt;-<span class="st"> </span>arcticdatautils<span class="op">::</span><span class="kw">eml_associated_party</span>(<span class="dt">given_names =</span> <span class="st">&quot;Jesse&quot;</span>, </a>
<a class="sourceLine" id="cb60-2" data-line-number="2">                                               <span class="dt">sur_name =</span> <span class="st">&quot;Goldstein&quot;</span>, </a>
<a class="sourceLine" id="cb60-3" data-line-number="3">                                               <span class="dt">organization =</span> <span class="st">&quot;NCEAS&quot;</span>, </a>
<a class="sourceLine" id="cb60-4" data-line-number="4">                                               <span class="dt">email =</span> <span class="st">&quot;jgoldstein@nceas.ucsb.edu&quot;</span>,</a>
<a class="sourceLine" id="cb60-5" data-line-number="5">                                               <span class="dt">phone =</span> <span class="st">&quot;123-456-7890&quot;</span>,  </a>
<a class="sourceLine" id="cb60-6" data-line-number="6">                                               <span class="dt">address =</span> NCEASadd, </a>
<a class="sourceLine" id="cb60-7" data-line-number="7">                                               <span class="dt">userId =</span> <span class="st">&quot;https://orcid.org/WWWW-XXXX-YYYY-ZZZZ&quot;</span>,</a>
<a class="sourceLine" id="cb60-8" data-line-number="8">                                               <span class="dt">role =</span> <span class="st">&quot;metaataProvider&quot;</span>)</a>
<a class="sourceLine" id="cb60-9" data-line-number="9">doc<span class="op">$</span>dataset<span class="op">$</span>associatedParty &lt;-<span class="st"> </span>JG_ap</a></code></pre></div>
</div>
<div id="validate-eml-and-update-package" class="section level2">
<h2><span class="header-section-number">4.11</span> Validate EML and update package</h2>
<p>To make sure that your edited EML is valid against the EML schema, run <code>eml_validate()</code> on your EML. Fix any errors that you see, and then save your EML to a path of your choice or a temp file. You will later pass this path as an argument to update the package.</p>
<div class="sourceCode" id="cb61"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb61-1" data-line-number="1"><span class="kw">eml_validate</span>(eml)</a>
<a class="sourceLine" id="cb61-2" data-line-number="2">eml_path &lt;-<span class="st"> &quot;path/to/save/eml.xml&quot;</span></a>
<a class="sourceLine" id="cb61-3" data-line-number="3"><span class="kw">write_eml</span>(eml, eml_path)</a></code></pre></div>
<p>To update a package with the newly edited EML, use <code>arcticdatautils::publish_update()</code>. This function has an argument for adding data <code>PID</code>s (or otherwise including existing data <code>PID</code>s) to make sure that they stay with the package. This function allows you to make metadata edits, as well as add or remove data objects (discussed in <a href="#update-a-data-package">the following chapter</a>).</p>
<div class="sourceCode" id="cb62"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb62-1" data-line-number="1">update &lt;-<span class="st"> </span><span class="kw">publish_update</span>(adc_test, </a>
<a class="sourceLine" id="cb62-2" data-line-number="2">                         <span class="dt">metadata_pid =</span> pkg<span class="op">$</span>metadata,</a>
<a class="sourceLine" id="cb62-3" data-line-number="3">                         <span class="dt">resource_map_pid =</span> pkg<span class="op">$</span>resource_map,</a>
<a class="sourceLine" id="cb62-4" data-line-number="4">                         <span class="dt">data_pids =</span> pkg<span class="op">$</span>data,</a>
<a class="sourceLine" id="cb62-5" data-line-number="5">                         <span class="dt">metadata_path =</span> eml_path, </a>
<a class="sourceLine" id="cb62-6" data-line-number="6">                         <span class="dt">public =</span> <span class="ot">FALSE</span>)</a></code></pre></div>
<p>Note that there are other arguments to <code>publish_update()</code> you may need.</p>
<p>After your package is published, run the <code>qa_package()</code> function from the <code>datamgmt</code> package.</p>
<p>The function arguments are as follows:</p>
<div class="sourceCode" id="cb63"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb63-1" data-line-number="1">qa_package &lt;-<span class="st"> </span><span class="cf">function</span>(node, pid, <span class="dt">readAllData =</span> <span class="ot">TRUE</span>,</a>
<a class="sourceLine" id="cb63-2" data-line-number="2">                       <span class="dt">check_attributes =</span> <span class="ot">TRUE</span>,</a>
<a class="sourceLine" id="cb63-3" data-line-number="3">                       <span class="dt">check_creators =</span> <span class="ot">FALSE</span>,</a>
<a class="sourceLine" id="cb63-4" data-line-number="4">                       <span class="dt">check_access =</span> <span class="ot">FALSE</span>)</a></code></pre></div>
<p>By default, <code>qa_package()</code> checks for:</p>
<ul>
<li>Correctness of distribution URLs for each data object (URLs must match the EML physical section for the object)</li>
<li>Congruence of metadata and data</li>
</ul>
<p>The <code>check_creators</code> and <code>check_access</code> flags can be set to <code>TRUE</code> to check:</p>
<ul>
<li>Correctness of ORCIDs of creators in a given EML</li>
<li>Rights and access are set for creators in the system metadata</li>
</ul>
<p>In most cases, <code>qa_package()</code> will be run just by passing in a member node and the resource map PID.</p>
<div class="sourceCode" id="cb64"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb64-1" data-line-number="1"><span class="kw">qa_package</span>(mn, resource_map_pid)</a></code></pre></div>
</div>
<div id="exercise-3" class="section level2 exercise">
<h2><span class="header-section-number">4.12</span> Exercise 3</h2>
<ul>
<li>Make sure your package from <a href="creating-a-data-package.html#exercise-2">before</a> is loaded into R.</li>
<li>Replace the existing <code>dataTable</code> with a new <code>dataTable</code> object with an <code>attributelist</code> and <code>physical</code> section you write in R using the above commands.</li>
<li>Then write, validate, and update your package.</li>
<li>Use the <a href = 'https://nceas.github.io/datateam-training/reference/final-checklist-before-notifying-submitter.html' target='_blank'>checklist</a> to review your submission.</li>
<li>Make edits where necessary, and publish updates as needed.</li>
</ul>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="exploring-eml.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="updating-a-data-package.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "section"
}
});
});
</script>

</body>

</html>
